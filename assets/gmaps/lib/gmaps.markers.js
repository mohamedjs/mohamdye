GMaps.prototype.createMarker=function(e){if(void 0==e.lat&&void 0==e.lng&&void 0==e.position)throw"No latitude or longitude defined.";var n=this,t=e.details,r=e.fences,i=e.outside,o={position:new google.maps.LatLng(e.lat,e.lng),map:null};delete e.lat,delete e.lng,delete e.fences,delete e.outside;var a=extend_object(o,e),s=new google.maps.Marker(a);if(s.fences=r,e.infoWindow){s.infoWindow=new google.maps.InfoWindow(e.infoWindow);for(var d=["closeclick","content_changed","domready","position_changed","zindex_changed"],l=0;l<d.length;l++)!function(n,t){e.infoWindow[t]&&google.maps.event.addListener(n,t,function(n){e.infoWindow[t].apply(this,[n])})}(s.infoWindow,d[l])}for(var c=["animation_changed","clickable_changed","cursor_changed","draggable_changed","flat_changed","icon_changed","position_changed","shadow_changed","shape_changed","title_changed","visible_changed","zindex_changed"],h=["dblclick","drag","dragend","dragstart","mousedown","mouseout","mouseover","mouseup"],l=0;l<c.length;l++)!function(n,t){e[t]&&google.maps.event.addListener(n,t,function(){e[t].apply(this,[this])})}(s,c[l]);for(l=0;l<h.length;l++)!function(n,t,r){e[r]&&google.maps.event.addListener(t,r,function(t){t.pixel||(t.pixel=n.getProjection().fromLatLngToPoint(t.latLng)),e[r].apply(this,[t])})}(this.map,s,h[l]);return google.maps.event.addListener(s,"click",function(){this.details=t,e.click&&e.click.apply(this,[this]),s.infoWindow&&(n.hideInfoWindows(),s.infoWindow.open(n.map,s))}),google.maps.event.addListener(s,"rightclick",function(t){t.marker=this,e.rightclick&&e.rightclick.apply(this,[t]),void 0!=window.context_menu[n.el.id].marker&&n.buildContextMenu("marker",t)}),s.fences&&google.maps.event.addListener(s,"dragend",function(){n.checkMarkerGeofence(s,function(e,n){i(e,n)})}),s},GMaps.prototype.addMarker=function(e){var n;if(e.hasOwnProperty("gm_accessors_"))n=e;else{if(!(e.hasOwnProperty("lat")&&e.hasOwnProperty("lng")||e.position))throw"No latitude or longitude defined.";n=this.createMarker(e)}return n.setMap(this.map),this.markerClusterer&&this.markerClusterer.addMarker(n),this.markers.push(n),GMaps.fire("marker_added",n,this),n},GMaps.prototype.addMarkers=function(e){for(var n,t=0;n=e[t];t++)this.addMarker(n);return this.markers},GMaps.prototype.hideInfoWindows=function(){for(var e,n=0;e=this.markers[n];n++)e.infoWindow&&e.infoWindow.close()},GMaps.prototype.removeMarker=function(e){for(var n=0;n<this.markers.length;n++)if(this.markers[n]===e){this.markers[n].setMap(null),this.markers.splice(n,1),GMaps.fire("marker_removed",e,this);break}return e},GMaps.prototype.removeMarkers=function(e){for(var e=e||this.markers,n=0;n<this.markers.length;n++)this.markers[n]===e[n]&&this.markers[n].setMap(null);for(var t=[],n=0;n<this.markers.length;n++)null!=this.markers[n].getMap()&&t.push(this.markers[n]);this.markers=t};