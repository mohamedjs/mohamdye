!function(t){var e={colors:1,values:1,backgroundColor:1,scaleColors:1,normalizeFunction:1,enableZoom:1,showTooltip:1,borderColor:1,borderWidth:1,borderOpacity:1,selectedRegion:1},s={onLabelShow:"labelShow",onRegionOver:"regionMouseOver",onRegionOut:"regionMouseOut",onRegionClick:"regionClick"};t.fn.vectorMap=function(i){var r,a={map:"world_en",backgroundColor:"#a5bfdd",color:"#f4f3f0",hoverColor:"#c9dfaf",selectedColor:"#c9dfaf",scaleColors:["#b6d6ff","#005ace"],normalizeFunction:"linear",enableZoom:!0,showTooltip:!0,borderColor:"#818181",borderWidth:1,borderOpacity:.25,selectedRegion:null};if("addMap"===i)o.maps[arguments[1]]=arguments[2];else if("set"===i&&e[arguments[1]])this.data("mapObject")["set"+arguments[1].charAt(0).toUpperCase()+arguments[1].substr(1)].apply(this.data("mapObject"),Array.prototype.slice.call(arguments,2));else{t.extend(a,i),a.container=this,this.css({position:"relative",overflow:"hidden"}),r=new o(a),this.data("mapObject",r);for(var n in s)a[n]&&this.bind(s[n]+".jqvmap",a[n])}};var i=function(t,e,s){if(this.mode=window.SVGAngle?"svg":"vml",this.params=s,"svg"==this.mode)this.createSvgNode=function(t){return document.createElementNS(this.svgns,t)};else{try{document.namespaces.rvml||document.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),this.createVmlNode=function(t){return document.createElement("<rvml:"+t+' class="rvml">')}}catch(t){this.createVmlNode=function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}document.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)")}"svg"==this.mode?this.canvas=this.createSvgNode("svg"):(this.canvas=this.createVmlNode("group"),this.canvas.style.position="absolute"),this.setSize(t,e)};i.prototype={svgns:"http://www.w3.org/2000/svg",mode:"svg",width:0,height:0,canvas:null,setSize:function(t,e){if("svg"==this.mode)this.canvas.setAttribute("width",t),this.canvas.setAttribute("height",e);else if(this.canvas.style.width=t+"px",this.canvas.style.height=e+"px",this.canvas.coordsize=t+" "+e,this.canvas.coordorigin="0 0",this.rootGroup){for(var s=this.rootGroup.getElementsByTagName("shape"),i=0,o=s.length;i<o;i++)s[i].coordsize=t+" "+e,s[i].style.width=t+"px",s[i].style.height=e+"px";this.rootGroup.coordsize=t+" "+e,this.rootGroup.style.width=t+"px",this.rootGroup.style.height=e+"px"}this.width=t,this.height=e},createPath:function(t){var e;if("svg"==this.mode)(e=this.createSvgNode("path")).setAttribute("d",t.path),null!==this.params.borderColor&&e.setAttribute("stroke",this.params.borderColor),this.params.borderWidth>0&&(e.setAttribute("stroke-width",this.params.borderWidth),e.setAttribute("stroke-linecap","round"),e.setAttribute("stroke-linejoin","round")),this.params.borderOpacity>0&&e.setAttribute("stroke-opacity",this.params.borderOpacity),e.setFill=function(t){this.setAttribute("fill",t),null===this.getAttribute("original")&&this.setAttribute("original",t)},e.getFill=function(t){return this.getAttribute("fill")},e.getOriginalFill=function(){return this.getAttribute("original")},e.setOpacity=function(t){this.setAttribute("fill-opacity",t)};else{(e=this.createVmlNode("shape")).coordorigin="0 0",e.coordsize=this.width+" "+this.height,e.style.width=this.width+"px",e.style.height=this.height+"px",e.fillcolor=o.defaultFillColor,e.stroked=!1,e.path=i.pathSvgToVml(t.path);var s=this.createVmlNode("skew");s.on=!0,s.matrix="0.01,0,0,0.01,0,0",s.offset="0,0",e.appendChild(s);var r=this.createVmlNode("fill");e.appendChild(r),e.setFill=function(t){this.getElementsByTagName("fill")[0].color=t},e.getFill=function(t){return this.getElementsByTagName("fill")[0].color},e.setOpacity=function(t){this.getElementsByTagName("fill")[0].opacity=parseInt(100*t,10)+"%"}}return e},createGroup:function(t){var e;return"svg"==this.mode?e=this.createSvgNode("g"):((e=this.createVmlNode("group")).style.width=this.width+"px",e.style.height=this.height+"px",e.style.left="0px",e.style.top="0px",e.coordorigin="0 0",e.coordsize=this.width+" "+this.height),t&&(this.rootGroup=e),e},applyTransformParams:function(t,e,s){"svg"==this.mode?this.rootGroup.setAttribute("transform","scale("+t+") translate("+e+", "+s+")"):(this.rootGroup.coordorigin=this.width-e+","+(this.height-s),this.rootGroup.coordsize=this.width/t+","+this.height/t)}},i.pathSvgToVml=function(t){var e,s,i=0,o=0;return t.replace(/([MmLlHhVvCcSs])((?:-?(?:\d+)?(?:\.\d+)?,?\s?)+)/g,function(t,r,a,n){(a=a.replace(/(\d)-/g,"$1,-").replace(/\s+/g,",").split(","))[0]||a.shift();for(var h=0,l=a.length;h<l;h++)a[h]=Math.round(100*a[h]);switch(r){case"m":return i+=a[0],o+=a[1],"t"+a.join(",");case"M":return i=a[0],o=a[1],"m"+a.join(",");case"l":return i+=a[0],o+=a[1],"r"+a.join(",");case"L":return i=a[0],o=a[1],"l"+a.join(",");case"h":return i+=a[0],"r"+a[0]+",0";case"H":return"l"+(i=a[0])+","+o;case"v":return o+=a[0],"r0,"+a[0];case"V":return o=a[0],"l"+i+","+o;case"c":return e=i+a[a.length-4],s=o+a[a.length-3],i+=a[a.length-2],o+=a[a.length-1],"v"+a.join(",");case"C":return e=a[a.length-4],s=a[a.length-3],i=a[a.length-2],o=a[a.length-1],"c"+a.join(",");case"s":return a.unshift(o-s),a.unshift(i-e),e=i+a[a.length-4],s=o+a[a.length-3],i+=a[a.length-2],o+=a[a.length-1],"v"+a.join(",");case"S":return a.unshift(o+o-s),a.unshift(i+i-e),e=a[a.length-4],s=a[a.length-3],i=a[a.length-2],o=a[a.length-1],"c"+a.join(",");default:return!1}return""}).replace(/z/g,"")};var o=function(e){e=e||{};var s=this,a=o.maps[e.map];this.container=e.container,this.defaultWidth=a.width,this.defaultHeight=a.height,this.color=e.color,this.hoverColor=e.hoverColor,this.setBackgroundColor(e.backgroundColor),this.width=e.container.width(),this.height=e.container.height(),this.resize(),jQuery(window).resize(function(){s.width=e.container.width(),s.height=e.container.height(),s.resize(),s.canvas.setSize(s.width,s.height),s.applyTransform()}),this.canvas=new i(this.width,this.height,e),e.container.append(this.canvas.canvas),this.makeDraggable(),this.rootGroup=this.canvas.createGroup(!0),this.index=o.mapIndex,this.label=jQuery("<div/>").addClass("jqvmap-label").appendTo(jQuery("body")),e.enableZoom&&(jQuery("<div/>").addClass("jqvmap-zoomin").text("+").appendTo(e.container),jQuery("<div/>").addClass("jqvmap-zoomout").html("&#x2212;").appendTo(e.container)),s.countries=[];for(var n in a.pathes){var h=this.canvas.createPath({path:a.pathes[n].path});h.setFill(this.color),h.id="jqvmap"+s.index+"_"+n,s.countries[n]=h,jQuery(this.rootGroup).append(h),h.setAttribute("class","jqvmap-region"),null!==e.selectedRegion&&n.toLowerCase()==e.selectedRegion.toLowerCase()&&h.setFill(e.selectedColor)}jQuery(e.container).delegate("svg"==this.canvas.mode?"path":"shape","mouseover mouseout",function(i){var o=i.target,r=i.target.id.split("_").pop(),n=t.Event("labelShow.jqvmap"),h=t.Event("regionMouseOver.jqvmap");"mouseover"==i.type?(jQuery(e.container).trigger(h,[r,a.pathes[r].name]),h.isDefaultPrevented()||(e.hoverOpacity?o.setOpacity(e.hoverOpacity):e.hoverColor&&(o.currentFillColor=o.getFill()+"",o.setFill(e.hoverColor))),e.showTooltip&&(s.label.text(a.pathes[r].name),jQuery(e.container).trigger(n,[s.label,r]),n.isDefaultPrevented()||(s.label.show(),s.labelWidth=s.label.width(),s.labelHeight=s.label.height()))):(o.setOpacity(1),o.currentFillColor&&o.setFill(o.currentFillColor),s.label.hide(),jQuery(e.container).trigger("regionMouseOut.jqvmap",[r,a.pathes[r].name]))}),jQuery(e.container).delegate("svg"==this.canvas.mode?"path":"shape","click",function(t){for(var i in a.pathes)s.countries[i].currentFillColor=s.countries[i].getOriginalFill(),s.countries[i].setFill(s.countries[i].getOriginalFill());var o=t.target,r=t.target.id.split("_").pop();jQuery(e.container).trigger("regionClick.jqvmap",[r,a.pathes[r].name]),o.currentFillColor=e.selectedColor,o.setFill(e.selectedColor)}),e.showTooltip&&e.container.mousemove(function(t){s.label.is(":visible")&&s.label.css({left:t.pageX-15-s.labelWidth,top:t.pageY-15-s.labelHeight})}),this.setColors(e.colors),this.canvas.canvas.appendChild(this.rootGroup),this.applyTransform(),this.colorScale=new r(e.scaleColors,e.normalizeFunction,e.valueMin,e.valueMax),e.values&&(this.values=e.values,this.setValues(e.values)),this.bindZoomButtons(),o.mapIndex++};o.prototype={transX:0,transY:0,scale:1,baseTransX:0,baseTransY:0,baseScale:1,width:0,height:0,countries:{},countriesColors:{},countriesData:{},zoomStep:1.4,zoomMaxStep:4,zoomCurStep:1,setColors:function(t,e){if("string"==typeof t)this.countries[t].setFill(e),this.countries[t].setAttribute("original",e);else{var s=t;for(var i in s)this.countries[i]&&(this.countries[i].setFill(s[i]),this.countries[i].setAttribute("original",s[i]))}},setValues:function(t){var e,s=0,i=Number.MAX_VALUE;for(var o in t)(e=parseFloat(t[o]))>s&&(s=t[o]),e&&e<i&&(i=e);this.colorScale.setMin(i),this.colorScale.setMax(s);var r={};for(o in t)e=parseFloat(t[o]),r[o]=e?this.colorScale.getColor(e):this.color;this.setColors(r),this.values=t},setBackgroundColor:function(t){this.container.css("background-color",t)},setScaleColors:function(t){this.colorScale.setColors(t),this.values&&this.setValues(this.values)},setNormalizeFunction:function(t){this.colorScale.setNormalizeFunction(t),this.values&&this.setValues(this.values)},resize:function(){var t=this.baseScale;this.width/this.height>this.defaultWidth/this.defaultHeight?(this.baseScale=this.height/this.defaultHeight,this.baseTransX=Math.abs(this.width-this.defaultWidth*this.baseScale)/(2*this.baseScale)):(this.baseScale=this.width/this.defaultWidth,this.baseTransY=Math.abs(this.height-this.defaultHeight*this.baseScale)/(2*this.baseScale)),this.scale*=this.baseScale/t,this.transX*=this.baseScale/t,this.transY*=this.baseScale/t},reset:function(){this.countryTitle.reset();for(var t in this.countries)this.countries[t].setFill(o.defaultColor);this.scale=this.baseScale,this.transX=this.baseTransX,this.transY=this.baseTransY,this.applyTransform()},applyTransform:function(){var t,e,s,i;this.defaultWidth*this.scale<=this.width?(t=(this.width-this.defaultWidth*this.scale)/(2*this.scale),s=(this.width-this.defaultWidth*this.scale)/(2*this.scale)):(t=0,s=(this.width-this.defaultWidth*this.scale)/this.scale),this.defaultHeight*this.scale<=this.height?(e=(this.height-this.defaultHeight*this.scale)/(2*this.scale),i=(this.height-this.defaultHeight*this.scale)/(2*this.scale)):(e=0,i=(this.height-this.defaultHeight*this.scale)/this.scale),this.transY>e?this.transY=e:this.transY<i&&(this.transY=i),this.transX>t?this.transX=t:this.transX<s&&(this.transX=s),this.canvas.applyTransformParams(this.scale,this.transX,this.transY)},makeDraggable:function(){var t,e,s=!1,i=this;this.container.mousemove(function(o){if(s){i.transX,i.transY;i.transX-=(t-o.pageX)/i.scale,i.transY-=(e-o.pageY)/i.scale,i.applyTransform(),t=o.pageX,e=o.pageY}return!1}).mousedown(function(i){return s=!0,t=i.pageX,e=i.pageY,!1}).mouseup(function(){return s=!1,!1})},bindZoomButtons:function(){var t=this,e=(jQuery("#zoom").innerHeight()-12-30-6-7-6)/(this.zoomMaxStep-this.zoomCurStep);this.container.find(".jqvmap-zoomin").click(function(){if(t.zoomCurStep<t.zoomMaxStep){t.transX,t.transY,t.scale;t.transX-=(t.width/t.scale-t.width/(t.scale*t.zoomStep))/2,t.transY-=(t.height/t.scale-t.height/(t.scale*t.zoomStep))/2,t.setScale(t.scale*t.zoomStep),t.zoomCurStep++,jQuery("#zoomSlider").css("top",parseInt(jQuery("#zoomSlider").css("top"),10)-e)}}),this.container.find(".jqvmap-zoomout").click(function(){if(t.zoomCurStep>1){t.transX,t.transY,t.scale;t.transX+=(t.width/(t.scale/t.zoomStep)-t.width/t.scale)/2,t.transY+=(t.height/(t.scale/t.zoomStep)-t.height/t.scale)/2,t.setScale(t.scale/t.zoomStep),t.zoomCurStep--,jQuery("#zoomSlider").css("top",parseInt(jQuery("#zoomSlider").css("top"),10)+e)}})},setScale:function(t){this.scale=t,this.applyTransform()},getCountryPath:function(t){return jQuery("#"+t)[0]}},o.xlink="http://www.w3.org/1999/xlink",o.mapIndex=1,o.maps={};var r=function(t,e,s,i){t&&this.setColors(t),e&&this.setNormalizeFunction(e),s&&this.setMin(s),s&&this.setMax(i)};r.prototype={colors:[],setMin:function(t){this.clearMinValue=t,"function"==typeof this.normalize?this.minValue=this.normalize(t):this.minValue=t},setMax:function(t){this.clearMaxValue=t,"function"==typeof this.normalize?this.maxValue=this.normalize(t):this.maxValue=t},setColors:function(t){for(var e=0;e<t.length;e++)t[e]=r.rgbToArray(t[e]);this.colors=t},setNormalizeFunction:function(t){"polynomial"===t?this.normalize=function(t){return Math.pow(t,.2)}:"linear"===t?delete this.normalize:this.normalize=t,this.setMin(this.clearMinValue),this.setMax(this.clearMaxValue)},getColor:function(t){"function"==typeof this.normalize&&(t=this.normalize(t));for(var e,s=[],i=0,o=0;o<this.colors.length-1;o++)e=this.vectorLength(this.vectorSubtract(this.colors[o+1],this.colors[o])),s.push(e),i+=e;var r=(this.maxValue-this.minValue)/i;for(o=0;o<s.length;o++)s[o]*=r;for(o=0,t-=this.minValue;t-s[o]>=0;)t-=s[o],o++;var a;for(a=o==this.colors.length-1?this.vectorToNum(this.colors[o]).toString(16):this.vectorToNum(this.vectorAdd(this.colors[o],this.vectorMult(this.vectorSubtract(this.colors[o+1],this.colors[o]),t/s[o]))).toString(16);a.length<6;)a="0"+a;return"#"+a},vectorToNum:function(t){for(var e=0,s=0;s<t.length;s++)e+=Math.round(t[s])*Math.pow(256,t.length-s-1);return e},vectorSubtract:function(t,e){for(var s=[],i=0;i<t.length;i++)s[i]=t[i]-e[i];return s},vectorAdd:function(t,e){for(var s=[],i=0;i<t.length;i++)s[i]=t[i]+e[i];return s},vectorMult:function(t,e){for(var s=[],i=0;i<t.length;i++)s[i]=t[i]*e;return s},vectorLength:function(t){for(var e=0,s=0;s<t.length;s++)e+=t[s]*t[s];return Math.sqrt(e)}},r.arrayToRgb=function(t){for(var e,s="#",i=0;i<t.length;i++)s+=1==(e=t[i].toString(16)).length?"0"+e:e;return s},r.rgbToArray=function(t){return t=t.substr(1),[parseInt(t.substr(0,2),16),parseInt(t.substr(2,2),16),parseInt(t.substr(4,2),16)]}}(jQuery);